
================================================================================
ROADMAP ACTUALIZADO - HEALTHYBOX PWA
================================================================================
Con Sistema de Citas y Carta PÃºblica
================================================================================

CAMBIOS PRINCIPALES:
âœ“ Agregada Fase 3: PÃ¡ginas PÃºblicas (booking + carta)
âœ“ Fase 2: Modificada (sin auto-registro, activaciÃ³n con token)
âœ“ Fase 5: Ampliada (nutricionista gestiona citas)
âœ“ Tiempo total: 16 semanas (vs. 15 anterior)

================================================================================
RESUMEN EJECUTIVO
================================================================================

MVP: 7 semanas (antes 6)
â”œâ”€ Cliente NO se auto-registra
â”œâ”€ Debe agendar cita primero
â”œâ”€ Nutricionista crea cuenta post-cita
â””â”€ Carta pÃºblica para marketing

VERSIÃ“N COMPLETA: 16 semanas (antes 15)
BUDGET INICIAL: â‚¬0-50/mes
EQUIPO: 1-2 desarrolladores full-stack

================================================================================
FASE 1: SETUP Y FUNDAMENTOS (Semana 1-2)
================================================================================
â± DuraciÃ³n: 8-10 dÃ­as
ğŸ¯ Objetivo: Entorno listo + estructura base

TAREAS:
â–¡ 1.1 ConfiguraciÃ³n inicial (3-4 dÃ­as)
  â”œâ”€ Crear cuenta en GitHub
  â”œâ”€ Crear cuenta en Vercel
  â”œâ”€ Crear cuenta en Supabase
  â”œâ”€ Instalar Node.js (v18+)
  â”œâ”€ Instalar VS Code + extensiones
  â””â”€ Configurar Git

â–¡ 1.2 Inicializar proyecto Next.js (1 dÃ­a)
  â”œâ”€ npx create-next-app@latest healthybox
  â”œâ”€ Seleccionar: TypeScript, Tailwind, App Router
  â”œâ”€ Instalar dependencias
  â””â”€ Configurar estructura de carpetas

â–¡ 1.3 Configurar Supabase (2-3 dÃ­as)
  â”œâ”€ Crear proyecto
  â”œâ”€ Crear 29 tablas (27 + 2 nuevas)
  â”‚   â””â”€ âœ¨ appointment_requests
  â”‚   â””â”€ âœ¨ restaurant_menu
  â”œâ”€ Configurar RLS
  â”œâ”€ Configurar Storage
  â””â”€ Probar conexiÃ³n

â–¡ 1.4 Configurar PWA (1 dÃ­a)
  â”œâ”€ Instalar next-pwa
  â”œâ”€ Crear manifest.json
  â”œâ”€ Generar iconos
  â””â”€ Configurar service worker

â–¡ 1.5 Configurar Tailwind (1 dÃ­a)
  â”œâ”€ Personalizar colores
  â”œâ”€ Crear componentes UI base
  â””â”€ Variables CSS globales

âœ… ENTREGABLE: Proyecto base + BD + PWA bÃ¡sico
â± TIEMPO: 8-10 dÃ­as

================================================================================
FASE 2: AUTENTICACIÃ“N Y ROLES (Semana 3)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Login + sistema de activaciÃ³n (sin auto-registro)
ğŸ†• CAMBIOS: Sin pÃ¡gina /register pÃºblica

TAREAS:
â–¡ 2.1 Implementar autenticaciÃ³n (3 dÃ­as)
  â”œâ”€ Crear pÃ¡gina /login
  â”œâ”€ âŒ NO crear /register pÃºblico
  â”œâ”€ âœ¨ Crear /activate (con token)
  â”œâ”€ Integrar Supabase Auth
  â”œâ”€ Middleware de autenticaciÃ³n
  â””â”€ Route guards

â–¡ 2.2 Crear layouts por rol (2 dÃ­as)
  â”œâ”€ Layout para Customer
  â”œâ”€ Layout para Admin
  â”œâ”€ Layout para Nutritionist
  â”œâ”€ Layout para Kitchen
  â”œâ”€ Layout para Logistics
  â”œâ”€ Layout para Support
  â””â”€ Navbar + Sidebar dinÃ¡mico

â–¡ 2.3 Configurar permisos RLS (2 dÃ­as)
  â”œâ”€ Policies para 29 tablas
  â”œâ”€ Probar acceso por rol
  â””â”€ Documentar permisos

âœ… ENTREGABLE: Login + activaciÃ³n + layouts + RLS
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 3: PÃGINAS PÃšBLICAS ğŸ†• (Semana 4)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Sistema de citas + carta del restaurante
ğŸ†• FASE NUEVA: CrÃ­tica para el nuevo flujo

TAREAS:
â–¡ 3.1 Landing page (1 dÃ­a)
  â”œâ”€ Hero section
  â”œâ”€ BotÃ³n: "Agendar Cita" (CTA principal)
  â”œâ”€ BotÃ³n: "Ver Carta" (CTA secundario)
  â”œâ”€ Features
  â”œâ”€ Testimonios
  â””â”€ Footer

â–¡ 3.2 Sistema de citas /booking (3 dÃ­as)
  â”œâ”€ BookingForm.tsx
  â”‚   â”œâ”€ Nombre, email, telÃ©fono
  â”‚   â”œâ”€ Objetivo (dropdown)
  â”‚   â”œâ”€ Mensaje opcional
  â”‚   â””â”€ Selector de fecha/hora
  â”œâ”€ AvailableSlots.tsx
  â”‚   â”œâ”€ Mostrar slots disponibles
  â”‚   â”œâ”€ Calcular desde availability del nutricionista
  â”‚   â””â”€ Bloquear slots ocupados
  â”œâ”€ API: /api/appointments/request
  â”‚   â”œâ”€ Validar datos
  â”‚   â”œâ”€ Crear appointment_request
  â”‚   â”œâ”€ Enviar email de confirmaciÃ³n
  â”‚   â””â”€ Notificar nutricionista
  â””â”€ PÃ¡gina de Ã©xito (/booking/success)

â–¡ 3.3 Carta del restaurante /menu (2 dÃ­as)
  â”œâ”€ RestaurantMenuGrid.tsx
  â”‚   â”œâ”€ Grid de platos por categorÃ­a
  â”‚   â”œâ”€ Filtros (mains, sides, desserts)
  â”‚   â””â”€ BÃºsqueda
  â”œâ”€ RestaurantMenuItem.tsx
  â”‚   â”œâ”€ Foto del plato
  â”‚   â”œâ”€ Nombre, precio
  â”‚   â”œâ”€ Macros (calorÃ­as, proteÃ­nas)
  â”‚   â””â”€ Click â†’ ver detalle
  â”œâ”€ API: /api/restaurant-menu (GET pÃºblico)
  â””â”€ PÃ¡gina detalle: /menu/[recipeId]

â–¡ 3.4 PÃ¡gina de activaciÃ³n /activate (1 dÃ­a)
  â”œâ”€ Validar token de activaciÃ³n
  â”œâ”€ Formulario para establecer password
  â”œâ”€ Activar cuenta en Supabase Auth
  â”œâ”€ Auto-login
  â””â”€ Redirigir a dashboard

âœ… ENTREGABLE: Landing + Citas + Carta + ActivaciÃ³n
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 4: PANEL DEL CLIENTE (Semana 5-6)
================================================================================
â± DuraciÃ³n: 10-12 dÃ­as
ğŸ¯ Objetivo: Cliente puede ver menÃº, cambiar comidas, tracking
ğŸ†• CAMBIO: Cliente entra con cuenta YA creada (no hay onboarding)

TAREAS:
â–¡ 4.1 Dashboard del cliente (2 dÃ­as)
  â”œâ”€ Resumen de suscripciÃ³n
  â”œâ”€ PrÃ³ximas comidas
  â”œâ”€ GrÃ¡fico de progreso
  â””â”€ Notificaciones

â–¡ 4.2 Ver menÃº semanal (2 dÃ­as)
  â”œâ”€ WeeklyMenuGrid.tsx
  â”œâ”€ MealCard.tsx
  â”œâ”€ Ver detalle de receta
  â””â”€ Historial de menÃºs

â–¡ 4.3 Cambiar comidas (viernes-domingo) (3 dÃ­as)
  â”œâ”€ Detectar ventana de cambios
  â”œâ”€ Mostrar opciones de reemplazo
  â”œâ”€ Validar que sea viernes-domingo
  â”œâ”€ API: /api/meals/change
  â”œâ”€ Guardar en meal_changes
  â””â”€ Actualizar customer_meals

â–¡ 4.4 Seguimiento de progreso (2 dÃ­as)
  â”œâ”€ TrackingForm.tsx
  â”œâ”€ ProgressChart.tsx (recharts)
  â”œâ”€ Subir foto de progreso
  â””â”€ Ver historial

â–¡ 4.5 GestiÃ³n de suscripciÃ³n (2 dÃ­as)
  â”œâ”€ Ver plan actual
  â”œâ”€ Pausar suscripciÃ³n
  â”œâ”€ Cambiar plan
  â””â”€ Cancelar (con razÃ³n)

âœ… ENTREGABLE: Panel completo del cliente
â± TIEMPO: 10-12 dÃ­as

================================================================================
FASE 5: PANEL DEL NUTRICIONISTA ğŸ†• (Semana 7-8)
================================================================================
â± DuraciÃ³n: 12-14 dÃ­as
ğŸ¯ Objetivo: Gestionar citas + crear clientes + menÃºs
ğŸ†• AMPLIADO: Ahora incluye gestiÃ³n completa de citas

TAREAS:
â–¡ 5.1 Dashboard del nutricionista (2 dÃ­as)
  â”œâ”€ Lista de clientes asignados
  â”œâ”€ PrÃ³ximas citas
  â”œâ”€ EstadÃ­sticas
  â””â”€ Alertas

â–¡ 5.2 GestiÃ³n de citas (3 dÃ­as) ğŸ†•
  â”œâ”€ /nutritionist/appointments
  â”‚   â”œâ”€ AppointmentList.tsx
  â”‚   â”œâ”€ Filtros (pending, confirmed, completed)
  â”‚   â””â”€ Ordenar por fecha
  â”œâ”€ /nutritionist/appointments/[id]
  â”‚   â”œâ”€ AppointmentDetails.tsx
  â”‚   â”œâ”€ Ver datos del solicitante
  â”‚   â”œâ”€ BotÃ³n: "Confirmar Cita"
  â”‚   â”œâ”€ BotÃ³n: "Cambiar Hora"
  â”‚   â”œâ”€ BotÃ³n: "Crear Cliente" (si completada)
  â”‚   â””â”€ Agregar notas
  â”œâ”€ /nutritionist/availability
  â”‚   â”œâ”€ AvailabilityCalendar.tsx
  â”‚   â”œâ”€ Configurar horario semanal
  â”‚   â”œâ”€ DuraciÃ³n de cita (default 45 min)
  â”‚   â””â”€ MÃ¡ximo citas por dÃ­a
  â””â”€ APIs:
      â”œâ”€ /api/appointments/confirm
      â”œâ”€ /api/appointments/complete
      â””â”€ /api/appointments/reschedule

â–¡ 5.3 Crear cliente desde cita (2 dÃ­as) ğŸ†•
  â”œâ”€ /nutritionist/clients/create
  â”œâ”€ CreateClientForm.tsx
  â”‚   â”œâ”€ Pre-llenar datos de la cita
  â”‚   â”œâ”€ Agregar datos fÃ­sicos (peso, altura)
  â”‚   â”œâ”€ Definir objetivo y target
  â”‚   â”œâ”€ Seleccionar plan y ciclo
  â”‚   â”œâ”€ Crear meal_plan personalizado
  â”‚   â””â”€ Generar activation_token
  â”œâ”€ API: /api/clients/create-from-appointment
  â””â”€ Enviar email de bienvenida con link de activaciÃ³n

â–¡ 5.4 GestiÃ³n de clientes (2 dÃ­as)
  â”œâ”€ Ver perfil completo
  â”œâ”€ Historial de peso/progreso
  â”œâ”€ Ver feedback de comidas
  â””â”€ Modificar meal_plan

â–¡ 5.5 Crear y gestionar recetas (2 dÃ­as)
  â”œâ”€ RecipeForm.tsx
  â”œâ”€ Agregar ingredientes
  â”œâ”€ Calcular macros
  â”œâ”€ Subir foto
  â””â”€ Marcar alÃ©rgenos

â–¡ 5.6 Crear menÃº semanal (2 dÃ­as)
  â”œâ”€ Seleccionar semana
  â”œâ”€ Asignar receta por dÃ­a/comida
  â”œâ”€ Configurar ventana de cambios
  â”œâ”€ Publicar (notifica clientes)
  â””â”€ Duplicar menÃº anterior

âœ… ENTREGABLE: Panel nutricionista + sistema de citas + creaciÃ³n de clientes
â± TIEMPO: 12-14 dÃ­as

================================================================================
FASE 6: SISTEMA DE PAGOS (Semana 9)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Stripe + PayPal + suscripciones recurrentes
Sin cambios respecto a roadmap anterior

TAREAS:
â–¡ 6.1 Integrar Stripe (3 dÃ­as)
â–¡ 6.2 Integrar PayPal (2 dÃ­as)
â–¡ 6.3 Integrar Bizum (1 dÃ­a)
â–¡ 6.4 Panel de suscripciones (1 dÃ­a)

âœ… ENTREGABLE: Pagos funcionando
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 7: PANEL DE COCINA Y LOGÃSTICA (Semana 10)
================================================================================
â± DuraciÃ³n: 8 dÃ­as
ğŸ¯ Objetivo: GestiÃ³n de Ã³rdenes + entregas
Sin cambios

âœ… ENTREGABLE: Cocina + logÃ­stica funcionando
â± TIEMPO: 8 dÃ­as

================================================================================
FASE 8: SOPORTE + IA (Semana 11)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Tickets con IA
Sin cambios

âœ… ENTREGABLE: Sistema de soporte
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 9: PANEL DE ADMIN ğŸ†• (Semana 12)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Dashboard completo + gestiÃ³n carta
ğŸ†• AGREGADO: GestiÃ³n de carta del restaurante

TAREAS:
â–¡ 9.1 Dashboard principal (3 dÃ­as)
  â”œâ”€ KPIs
  â”œâ”€ GrÃ¡ficos
  â”œâ”€ Alertas
  â””â”€ Analytics

â–¡ 9.2 GestiÃ³n de citas (1 dÃ­a) ğŸ†•
  â”œâ”€ Ver todas las citas
  â”œâ”€ AppointmentCalendar.tsx
  â”œâ”€ EstadÃ­sticas de citas
  â””â”€ Asignar nutricionista

â–¡ 9.3 GestiÃ³n de carta del restaurante (2 dÃ­as) ğŸ†•
  â”œâ”€ /admin/restaurant-menu
  â”œâ”€ RestaurantMenuManager.tsx
  â”‚   â”œâ”€ Agregar plato a la carta
  â”‚   â”œâ”€ Seleccionar recipe
  â”‚   â”œâ”€ Establecer precio a la carta
  â”‚   â”œâ”€ CategorÃ­a (mains, sides, desserts)
  â”‚   â”œâ”€ Disponibilidad (activo/inactivo)
  â”‚   â””â”€ Orden de display
  â”œâ”€ API: /api/restaurant-menu/update
  â””â”€ Preview de cÃ³mo se ve en /menu

â–¡ 9.4 GestiÃ³n de usuarios (1 dÃ­a)
  â”œâ”€ Crear usuarios por rol
  â”œâ”€ Editar permisos
  â””â”€ Desactivar

âœ… ENTREGABLE: Panel admin + gestiÃ³n carta
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 10: NOTIFICACIONES (Semana 13)
================================================================================
â± DuraciÃ³n: 6 dÃ­as
ğŸ¯ Objetivo: Push + Email + SMS
ğŸ†• AGREGADO: Notificaciones de citas

TAREAS:
â–¡ 10.1 Push notifications (2 dÃ­as)
  â”œâ”€ Nuevo menÃº disponible
  â”œâ”€ Recordatorio de cambios
  â”œâ”€ Recordatorio de entrega
  â””â”€ ğŸ†• Recordatorio de cita (24h antes)

â–¡ 10.2 Email notifications (2 dÃ­as)
  â”œâ”€ Bienvenida
  â”œâ”€ ConfirmaciÃ³n de suscripciÃ³n
  â”œâ”€ MenÃº semanal
  â”œâ”€ Facturas
  â””â”€ ğŸ†• ConfirmaciÃ³n de cita
  â””â”€ ğŸ†• Link de activaciÃ³n de cuenta

â–¡ 10.3 SMS (1 dÃ­a)
  â”œâ”€ Entrega en camino
  â””â”€ ğŸ†• Recordatorio de cita

â–¡ 10.4 Preferencias (1 dÃ­a)

âœ… ENTREGABLE: Notificaciones completas
â± TIEMPO: 6 dÃ­as

================================================================================
FASE 11: PWA Y OPTIMIZACIÃ“N (Semana 14)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: PWA optimizada
Sin cambios

âœ… ENTREGABLE: PWA profesional
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 12: TESTING (Semana 15)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Testing completo
ğŸ†• AGREGADO: Tests de sistema de citas

TAREAS:
â–¡ 12.1 Tests unitarios (2 dÃ­as)
â–¡ 12.2 Tests de integraciÃ³n (2 dÃ­as)
  â””â”€ ğŸ†• Flujo: solicitar cita â†’ confirmar â†’ crear cliente
â–¡ 12.3 Tests E2E (2 dÃ­as)
  â””â”€ ğŸ†• Test: usuario agenda cita, nutricionista crea cliente, cliente activa cuenta
â–¡ 12.4 OptimizaciÃ³n (1 dÃ­a)

âœ… ENTREGABLE: App testeada
â± TIEMPO: 7 dÃ­as

================================================================================
FASE 13: DEPLOY (Semana 16)
================================================================================
â± DuraciÃ³n: 7 dÃ­as
ğŸ¯ Objetivo: Lanzar a producciÃ³n
Sin cambios

âœ… ENTREGABLE: HealthyBox en producciÃ³n ğŸš€
â± TIEMPO: 7 dÃ­as

================================================================================
RESUMEN DE TIEMPOS
================================================================================

MVP (CRÃTICO):
â”œâ”€ Fase 1: Setup (2 semanas)
â”œâ”€ Fase 2: Auth + activaciÃ³n (1 semana)
â”œâ”€ Fase 3: PÃ¡ginas pÃºblicas ğŸ†• (1 semana)
â”œâ”€ Fase 4: Panel cliente (2 semanas)
â”œâ”€ Fase 5: Panel nutricionista ampliado ğŸ†• (2 semanas)
â”œâ”€ Fase 6: Pagos (1 semana)
â””â”€ TOTAL MVP: 9 semanas (vs. 6 anterior)

VERSIÃ“N COMPLETA:
â”œâ”€ MVP (9 semanas)
â”œâ”€ Fase 7: Cocina/LogÃ­stica (1 semana)
â”œâ”€ Fase 8: Soporte + IA (1 semana)
â”œâ”€ Fase 9: Admin ampliado ğŸ†• (1 semana)
â”œâ”€ Fase 10: Notificaciones ampliadas ğŸ†• (1 semana)
â”œâ”€ Fase 11: PWA (1 semana)
â”œâ”€ Fase 12: Testing ampliado ğŸ†• (1 semana)
â”œâ”€ Fase 13: Deploy (1 semana)
â””â”€ TOTAL: 16 semanas (4 meses)

================================================================================
CAMBIOS RESPECTO A ROADMAP ANTERIOR
================================================================================

AGREGADO:
+ Fase 3 completa (pÃ¡ginas pÃºblicas) - 1 semana
+ Sistema de citas en Fase 5 - 3 dÃ­as extra
+ GestiÃ³n de carta en Fase 9 - 2 dÃ­as extra
+ Tests de citas en Fase 12 - incluido

TIEMPO TOTAL:
- Anterior: 15 semanas
- Nuevo: 16 semanas
- Diferencia: +1 semana

MVP:
- Anterior: 6 semanas
- Nuevo: 9 semanas (mÃ¡s robusto)
- Diferencia: +3 semanas

VENTAJAS DEL NUEVO FLUJO:
âœ… Control total sobre quiÃ©n entra
âœ… Evitas auto-registros spam
âœ… Mejor conversiÃ³n (cliente comprometido)
âœ… Carta pÃºblica para SEO
âœ… Legitimidad profesional

COMPLEJIDAD:
+ Moderada (calendario de citas es estÃ¡ndar)
+ Sin tecnologÃ­as adicionales

Â¿VALE LA PENA +3 SEMANAS?
âœ… SÃ. Mejora significativa del modelo de negocio

================================================================================
PRIORIDADES ACTUALIZADAS
================================================================================

CRÃTICO (MVP - 9 semanas):
âœ“ Fase 1: Setup
âœ“ Fase 2: Auth con activaciÃ³n
âœ“ Fase 3: PÃ¡ginas pÃºblicas (booking + carta) ğŸ†•
âœ“ Fase 4: Panel cliente
âœ“ Fase 5: Panel nutricionista (con citas) ğŸ†•
âœ“ Fase 6: Pagos

IMPORTANTE (Para lanzar completo - 16 semanas):
âœ“ Fase 7: Cocina/LogÃ­stica
âœ“ Fase 8: Soporte + IA
âœ“ Fase 9: Admin (con carta) ğŸ†•
âœ“ Fase 10: Notificaciones (con citas) ğŸ†•
âœ“ Fase 11: PWA optimizada
âœ“ Fase 12: Testing completo
âœ“ Fase 13: Deploy

DESEABLE (Post-lanzamiento):
â—‹ App mÃ³vil nativa
â—‹ Analytics avanzado
â—‹ Exportar reportes
â—‹ IntegraciÃ³n wearables
â—‹ GamificaciÃ³n

================================================================================
PRESUPUESTO (Sin cambios)
================================================================================

SERVICIOS MENSUALES:
â”œâ”€ Vercel (Hobby): â‚¬0/mes
â”œâ”€ Supabase (Free): â‚¬0/mes
â”œâ”€ Stripe: 1.5% + â‚¬0.25
â”œâ”€ Resend (Free): â‚¬0/mes
â”œâ”€ OpenAI: ~â‚¬20-50/mes
â””â”€ TOTAL: â‚¬0-50/mes inicial

================================================================================
Â¡Ã‰XITO CON HEALTHYBOX! ğŸš€
================================================================================
