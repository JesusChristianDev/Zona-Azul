-- Seed file to ensure test subscribers exist for smoke tests
INSERT INTO public.users (id, email, password_hash, role, name, phone, avatar_url, created_at, updated_at, must_change_password)
VALUES
  ('2c3ac638-c3b0-4d6e-92c7-188b7aa32d86', 'cliente@zonaazul.com', '$2b$10$j016wcDmj8YRvexbcLRApOUx7cqhxpBA6PWcWPdl/c3qEskniZc9a', 'suscriptor', 'Gregorio', NULL, NULL, '2025-01-01 00:00:00+00', '2025-11-14 03:47:14.17379+00', FALSE),
  ('411dc188-0abb-4801-aaea-d94f0ade3058', 'test@zonaazul.com', '$2b$10$ZOrnQtr7XYYYqfUBWO1iOOWrnWrYdtcbNIsZlaSutuuPqm/jJEzie', 'suscriptor', 'Paco', NULL, NULL, '2025-01-01 00:00:00+00', '2025-11-14 03:47:14.17379+00', FALSE),
  ('588034f2-117f-433d-bfdb-1e0679df5079', 'jesus1999misu@gmail.com', '$2b$10$cEeGSuwUGMWyp/r8QwUss.3JafZ1fbLOG7ULIrgowiJTlQHvtxcVS', 'suscriptor', 'Jesús Cristian Méndez Vanguela', '+34622498534', NULL, '2025-11-11 16:59:19.754751+00', '2025-11-15 19:30:48.55282+00', FALSE),
  ('a1b2c3d4-e5f6-4789-a012-345678901234', 'cliente1@zonaazul.com', '$2b$10$uZu40L/PAAMj9/5rgbXOR.06cbo0Kk0qYUVQ/roGWFdNqfZhdDmYK', 'suscriptor', 'María García', '+34 600 123 456', NULL, '2025-11-16 10:05:45.805339+00', '2025-11-16 10:05:45.805339+00', FALSE),
  ('b2c3d4e5-f6a7-4890-b123-456789012345', 'cliente2@zonaazul.com', '$2b$10$uZu40L/PAAMj9/5rgbXOR.06cbo0Kk0qYUVQ/roGWFdNqfZhdDmYK', 'suscriptor', 'Juan Pérez', '+34 600 654 321', NULL, '2025-11-16 10:05:45.805339+00', '2025-11-16 10:05:45.805339+00', FALSE)
ON CONFLICT (id) DO UPDATE SET
  email = EXCLUDED.email,
  password_hash = EXCLUDED.password_hash,
  role = EXCLUDED.role,
  name = EXCLUDED.name,
  phone = EXCLUDED.phone,
  updated_at = EXCLUDED.updated_at,
  must_change_password = EXCLUDED.must_change_password;

-- Seed ficha técnica data for smoke tests
INSERT INTO public.fichas_tecnicas (
  user_id,
  sexo,
  edad,
  peso_kg,
  altura_cm,
  imc,
  densidad_osea,
  masa_magra,
  masa_grasa,
  trabajo,
  nivel_actividad,
  puesto_trabajo,
  intensidad_trabajo,
  entrenamientos_semanales,
  nivel_entrenamiento,
  patologias,
  preferencias,
  objetivo,
  comidas_por_dia,
  fecha_revision,
  calorias_objetivo,
  get_total,
  tmb,
  factor_actividad,
  proteinas_objetivo,
  grasas_objetivo,
  carbohidratos_objetivo,
  fibra_objetivo,
  distribucion_calorias,
  distribucion_macros,
  observaciones,
  updated_at
)
VALUES
  (
    '2c3ac638-c3b0-4d6e-92c7-188b7aa32d86',
    'hombre',
    38,
    92.5,
    178.0,
    29.2,
    1.08,
    68.0,
    24.5,
    'moderado',
    'moderado',
    'Supervisor logístico',
    'moderada',
    3,
    'intermedio',
    'Hipertensión controlada',
    'Evitar mariscos',
    'perder_grasa',
    2,
    '2025-12-10',
    2300,
    2850,
    1905.0,
    1.55,
    180,
    80,
    235,
    30,
    '{"lunch":0.55,"dinner":0.45}'::jsonb,
    '{"lunch":{"calorias":1265,"proteinas":100,"grasas":44,"carbohidratos":130},"dinner":{"calorias":1035,"proteinas":80,"grasas":36,"carbohidratos":105}}'::jsonb,
    'Caso con ligera hipertensión, dieta sin mariscos.',
    NOW()
  ),
  (
    '411dc188-0abb-4801-aaea-d94f0ade3058',
    'hombre',
    45,
    104.0,
    182.0,
    31.4,
    1.05,
    72.0,
    32.0,
    'sedentario',
    'ligero',
    'Contable',
    'baja',
    2,
    'principiante',
    NULL,
    'Prefiere comidas bajas en picante',
    'mantener',
    2,
    '2025-12-05',
    2500,
    2700,
    1950.0,
    1.4,
    165,
    85,
    280,
    32,
    '{"lunch":0.5,"dinner":0.5}'::jsonb,
    '{"lunch":{"calorias":1250,"proteinas":82,"grasas":42,"carbohidratos":140},"dinner":{"calorias":1250,"proteinas":83,"grasas":43,"carbohidratos":140}}'::jsonb,
    'Trabajo sedentario, se busca mantenimiento antes de una fase de pérdida.',
    NOW()
  ),
  (
    '588034f2-117f-433d-bfdb-1e0679df5079',
    'hombre',
    26,
    78.0,
    180.0,
    24.1,
    1.12,
    65.0,
    13.0,
    'intenso',
    'intenso',
    'Instalador fotovoltaico',
    'alta',
    5,
    'avanzado',
    NULL,
    'Alto consumo de vegetales, sin restricciones',
    'ganar_masa',
    2,
    '2025-11-30',
    3100,
    3300,
    1820.0,
    1.8,
    170,
    90,
    360,
    38,
    '{"lunch":0.6,"dinner":0.4}'::jsonb,
    '{"lunch":{"calorias":1860,"proteinas":110,"grasas":55,"carbohidratos":220},"dinner":{"calorias":1240,"proteinas":60,"grasas":35,"carbohidratos":140}}'::jsonb,
    'Cliente muy activo, prefiere almuerzos más pesados antes del turno de tarde.',
    NOW()
  ),
  (
    'a1b2c3d4-e5f6-4789-a012-345678901234',
    'mujer',
    33,
    64.0,
    168.0,
    22.6,
    1.14,
    50.0,
    14.0,
    'moderado',
    'ligero',
    'Diseñadora UX',
    'baja',
    4,
    'intermedio',
    'Resistencia a la insulina leve',
    'Prefiere pescados blancos, evita fritos',
    'mantener',
    2,
    '2025-12-15',
    2050,
    2250,
    1505.0,
    1.5,
    125,
    70,
    245,
    28,
    '{"lunch":0.52,"dinner":0.48}'::jsonb,
    '{"lunch":{"calorias":1066,"proteinas":68,"grasas":37,"carbohidratos":125},"dinner":{"calorias":984,"proteinas":57,"grasas":33,"carbohidratos":120}}'::jsonb,
    'Mantener composición corporal mientras mejora sensibilidad a la insulina.',
    NOW()
  ),
  (
    'b2c3d4e5-f6a7-4890-b123-456789012345',
    'hombre',
    41,
    86.0,
    175.0,
    28.1,
    1.09,
    64.0,
    22.0,
    'moderado',
    'moderado',
    'Chef de cocina',
    'alta',
    4,
    'avanzado',
    'Alergia leve al látex',
    'Disfruta comidas picantes y cocina al horno',
    'recomp_corporal',
    2,
    '2025-12-08',
    2600,
    2750,
    1780.0,
    1.55,
    170,
    80,
    295,
    34,
    '{"lunch":0.57,"dinner":0.43}'::jsonb,
    '{"lunch":{"calorias":1482,"proteinas":95,"grasas":46,"carbohidratos":170},"dinner":{"calorias":1118,"proteinas":75,"grasas":34,"carbohidratos":125}}'::jsonb,
    'Busca recomposición para competir en triatlones amateurs.',
    NOW()
  )
ON CONFLICT (user_id) DO UPDATE SET
  sexo = EXCLUDED.sexo,
  edad = EXCLUDED.edad,
  peso_kg = EXCLUDED.peso_kg,
  altura_cm = EXCLUDED.altura_cm,
  imc = EXCLUDED.imc,
  densidad_osea = EXCLUDED.densidad_osea,
  masa_magra = EXCLUDED.masa_magra,
  masa_grasa = EXCLUDED.masa_grasa,
  trabajo = EXCLUDED.trabajo,
  nivel_actividad = EXCLUDED.nivel_actividad,
  puesto_trabajo = EXCLUDED.puesto_trabajo,
  intensidad_trabajo = EXCLUDED.intensidad_trabajo,
  entrenamientos_semanales = EXCLUDED.entrenamientos_semanales,
  nivel_entrenamiento = EXCLUDED.nivel_entrenamiento,
  patologias = EXCLUDED.patologias,
  preferencias = EXCLUDED.preferencias,
  objetivo = EXCLUDED.objetivo,
  comidas_por_dia = EXCLUDED.comidas_por_dia,
  fecha_revision = EXCLUDED.fecha_revision,
  calorias_objetivo = EXCLUDED.calorias_objetivo,
  get_total = EXCLUDED.get_total,
  tmb = EXCLUDED.tmb,
  factor_actividad = EXCLUDED.factor_actividad,
  proteinas_objetivo = EXCLUDED.proteinas_objetivo,
  grasas_objetivo = EXCLUDED.grasas_objetivo,
  carbohidratos_objetivo = EXCLUDED.carbohidratos_objetivo,
  fibra_objetivo = EXCLUDED.fibra_objetivo,
  distribucion_calorias = EXCLUDED.distribucion_calorias,
  distribucion_macros = EXCLUDED.distribucion_macros,
  observaciones = EXCLUDED.observaciones,
  updated_at = EXCLUDED.updated_at;

-- Seed base ingredients for recipe testing
ALTER TABLE IF EXISTS public.recetas
ADD COLUMN IF NOT EXISTS created_by UUID REFERENCES users(id) ON DELETE SET NULL;

ALTER TABLE IF EXISTS public.recetas
ADD COLUMN IF NOT EXISTS es_biblioteca BOOLEAN NOT NULL DEFAULT false;

CREATE INDEX IF NOT EXISTS idx_recetas_es_biblioteca ON public.recetas(es_biblioteca);

INSERT INTO public.ingredientes (id, nombre, unidad_base, calorias_por_unidad, proteinas_por_unidad, carbohidratos_por_unidad, grasas_por_unidad, stock_minimo)
VALUES
  ('f6e7c8a1-1234-4a6f-98ab-000000000101', 'Pechuga de pollo', 'g', 1.65, 0.31, 0, 0.04, 5000),
  ('f6e7c8a1-1234-4a6f-98ab-000000000102', 'Quinoa cocida', 'g', 1.2, 0.045, 0.21, 0.019, 3000),
  ('f6e7c8a1-1234-4a6f-98ab-000000000103', 'Mezcla de vegetales', 'g', 0.45, 0.02, 0.08, 0.005, 4000),
  ('f6e7c8a1-1234-4a6f-98ab-000000000104', 'Salmón fresco', 'g', 2, 0.2, 0, 0.13, 2500),
  ('f6e7c8a1-1234-4a6f-98ab-000000000105', 'Batata asada', 'g', 0.86, 0.02, 0.2, 0.003, 2500),
  ('f6e7c8a1-1234-4a6f-98ab-000000000106', 'Aceite de oliva', 'ml', 8.84, 0, 0, 1, 500),
  ('f6e7c8a1-1234-4a6f-98ab-000000000107', 'Arroz integral cocido', 'g', 1.15, 0.025, 0.25, 0.01, 3000),
  ('f6e7c8a1-1234-4a6f-98ab-000000000108', 'Lentejas cocidas', 'g', 1.16, 0.09, 0.20, 0.004, 3000),
  ('f6e7c8a1-1234-4a6f-98ab-000000000109', 'Espinaca fresca', 'g', 0.23, 0.029, 0.036, 0.004, 1500),
  ('f6e7c8a1-1234-4a6f-98ab-00000000010A', 'Yogur griego natural', 'g', 0.59, 0.1, 0.038, 0.007, 2000)
ON CONFLICT (id) DO UPDATE SET
  nombre = EXCLUDED.nombre,
  unidad_base = EXCLUDED.unidad_base,
  calorias_por_unidad = EXCLUDED.calorias_por_unidad,
  proteinas_por_unidad = EXCLUDED.proteinas_por_unidad,
  carbohidratos_por_unidad = EXCLUDED.carbohidratos_por_unidad,
  grasas_por_unidad = EXCLUDED.grasas_por_unidad,
  stock_minimo = EXCLUDED.stock_minimo,
  updated_at = NOW();

-- Additional pantry items for extended corporate plan
INSERT INTO public.ingredientes (id, nombre, unidad_base, calorias_por_unidad, proteinas_por_unidad, carbohidratos_por_unidad, grasas_por_unidad, stock_minimo)
VALUES
  ('f6e7c8a1-1234-4a6f-98ab-00000000010B', 'Garbanzos cocidos', 'g', 1.64, 0.09, 0.27, 0.03, 3200),
  ('f6e7c8a1-1234-4a6f-98ab-00000000010C', 'Kale fresco', 'g', 0.35, 0.03, 0.07, 0.005, 1800),
  ('f6e7c8a1-1234-4a6f-98ab-00000000010D', 'Tofu firme', 'g', 0.76, 0.08, 0.015, 0.045, 2400),
  ('f6e7c8a1-1234-4a6f-98ab-00000000010E', 'Pasta integral cocida', 'g', 1.25, 0.05, 0.26, 0.01, 2600),
  ('f6e7c8a1-1234-4a6f-98ab-00000000010F', 'Tomate cherry', 'g', 0.18, 0.009, 0.04, 0.002, 1800),
  ('f6e7c8a1-1234-4a6f-98ab-000000000110', 'Pepino fresco', 'g', 0.16, 0.007, 0.038, 0.002, 1500),
  ('f6e7c8a1-1234-4a6f-98ab-000000000111', 'Hummus artesanal', 'g', 2.5, 0.08, 0.15, 0.18, 1200),
  ('f6e7c8a1-1234-4a6f-98ab-000000000112', 'Tortilla integral', 'g', 2.8, 0.09, 0.46, 0.07, 900),
  ('f6e7c8a1-1234-4a6f-98ab-000000000113', 'Queso feta', 'g', 2.64, 0.14, 0.04, 0.21, 700),
  ('f6e7c8a1-1234-4a6f-98ab-000000000114', 'Arándanos frescos', 'g', 0.57, 0.007, 0.14, 0.003, 600),
  ('f6e7c8a1-1234-4a6f-98ab-000000000115', 'Remolacha asada', 'g', 0.43, 0.016, 0.1, 0.002, 900),
  ('f6e7c8a1-1234-4a6f-98ab-000000000116', 'Calabaza rostizada', 'g', 0.45, 0.01, 0.12, 0.005, 1100),
  ('f6e7c8a1-1234-4a6f-98ab-000000000117', 'Brócoli al vapor', 'g', 0.35, 0.03, 0.07, 0.004, 1500)
ON CONFLICT (id) DO UPDATE SET
  nombre = EXCLUDED.nombre,
  unidad_base = EXCLUDED.unidad_base,
  calorias_por_unidad = EXCLUDED.calorias_por_unidad,
  proteinas_por_unidad = EXCLUDED.proteinas_por_unidad,
  carbohidratos_por_unidad = EXCLUDED.carbohidratos_por_unidad,
  grasas_por_unidad = EXCLUDED.grasas_por_unidad,
  stock_minimo = EXCLUDED.stock_minimo,
  updated_at = NOW();

-- Seed plan base for weekly plan tests
INSERT INTO public.planes_base (
  id,
  nombre,
  descripcion,
  objetivo,
  dias_plan,
  calorias_base,
  proteinas_base,
  carbohidratos_base,
  grasas_base,
  created_by,
  is_active,
  created_at,
  updated_at
)
VALUES (
  '0a1b2c3d-4e5f-6789-abcd-ef0123456789',
  'Plan Balanceado 2 comidas',
  'Plan base pensado para almuerzo/cena con enfoque de recomposición y salud metabólica.',
  'mantener',
  5,
  2200,
  150,
  250,
  70,
  NULL,
  TRUE,
  NOW(),
  NOW()
)
ON CONFLICT (id) DO UPDATE SET
  nombre = EXCLUDED.nombre,
  descripcion = EXCLUDED.descripcion,
  objetivo = EXCLUDED.objetivo,
  dias_plan = EXCLUDED.dias_plan,
  calorias_base = EXCLUDED.calorias_base,
  proteinas_base = EXCLUDED.proteinas_base,
  carbohidratos_base = EXCLUDED.carbohidratos_base,
  grasas_base = EXCLUDED.grasas_base,
  is_active = EXCLUDED.is_active,
  updated_at = NOW();

-- Extended weekday rotation plan (20 días hábiles)
INSERT INTO public.planes_base (
  id,
  nombre,
  descripcion,
  objetivo,
  dias_plan,
  calorias_base,
  proteinas_base,
  carbohidratos_base,
  grasas_base,
  created_by,
  is_active,
  created_at,
  updated_at
)
VALUES (
  '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06',
  'Plan Ejecutivo 4 semanas',
  'Rotación corporativa de lunes a viernes con énfasis en saciedad, digestibilidad y logística semanal.',
  'mantener',
  20,
  2100,
  140,
  240,
  70,
  NULL,
  TRUE,
  NOW(),
  NOW()
)
ON CONFLICT (id) DO UPDATE SET
  nombre = EXCLUDED.nombre,
  descripcion = EXCLUDED.descripcion,
  objetivo = EXCLUDED.objetivo,
  dias_plan = EXCLUDED.dias_plan,
  calorias_base = EXCLUDED.calorias_base,
  proteinas_base = EXCLUDED.proteinas_base,
  carbohidratos_base = EXCLUDED.carbohidratos_base,
  grasas_base = EXCLUDED.grasas_base,
  is_active = EXCLUDED.is_active,
  updated_at = NOW();

-- Seed recipes (two for lunch/dinner) tied to the plan base and library
INSERT INTO public.recetas (
  id,
  plan_base_id,
  nombre,
  descripcion,
  meal_type,
  calorias_totales,
  proteinas_totales,
  carbohidratos_totales,
  grasas_totales,
  porciones,
  formula_escalado,
  tiempo_preparacion_min,
  es_biblioteca
)
VALUES
  (
    '11111111-2222-3333-4444-555555555551',
    '0a1b2c3d-4e5f-6789-abcd-ef0123456789',
    'Bowl de pollo y quinoa',
    'Pechuga a la plancha con quinoa, vegetales y aderezo ligero.',
    'lunch',
    700,
    55,
    65,
    24,
    1,
    NULL,
    30,
    TRUE
  ),
  (
    '11111111-2222-3333-4444-555555555552',
    '0a1b2c3d-4e5f-6789-abcd-ef0123456789',
    'Salmón con batatas y espinaca',
    'Salmón al horno con batata asada y espinacas salteadas.',
    'dinner',
    600,
    45,
    45,
    22,
    1,
    NULL,
    35,
    TRUE
  )
ON CONFLICT (id) DO UPDATE SET
  plan_base_id = EXCLUDED.plan_base_id,
  nombre = EXCLUDED.nombre,
  descripcion = EXCLUDED.descripcion,
  meal_type = EXCLUDED.meal_type,
  calorias_totales = EXCLUDED.calorias_totales,
  proteinas_totales = EXCLUDED.proteinas_totales,
  carbohidratos_totales = EXCLUDED.carbohidratos_totales,
  grasas_totales = EXCLUDED.grasas_totales,
  porciones = EXCLUDED.porciones,
  tiempo_preparacion_min = EXCLUDED.tiempo_preparacion_min,
  es_biblioteca = TRUE,
  updated_at = NOW();

-- Library of 20 rotating recipes for Plan Ejecutivo 4 semanas
INSERT INTO public.recetas (
  id,
  plan_base_id,
  nombre,
  descripcion,
  meal_type,
  calorias_totales,
  proteinas_totales,
  carbohidratos_totales,
  grasas_totales,
  porciones,
  formula_escalado,
  tiempo_preparacion_min,
  es_biblioteca
)
VALUES
  ('71f0a8b1-6a01-4a1f-9000-000000000101', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Bowl energizante de tofu y quinoa', 'Tofu sellado con quinoa tibia, kale salteado y garbanzos tostados.', 'lunch', 640, 33, 78, 20, 1, NULL, 25, TRUE),
  ('71f0a8b1-6a02-4a1f-9000-000000000102', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Pollo cítrico con garbanzos tostados', 'Pechuga marinada en cítricos con garbanzos crujientes y arroz integral.', 'lunch', 610, 45, 60, 18, 1, NULL, 30, TRUE),
  ('71f0a8b1-6a03-4a1f-9000-000000000103', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Wrap integral mediterráneo', 'Tortilla integral con hummus, espinaca fresca y pepino crocante.', 'lunch', 585, 30, 65, 18, 1, NULL, 20, TRUE),
  ('71f0a8b1-6a04-4a1f-9000-000000000104', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Lentejas cremosas con kale', 'Lentejas guisadas con kale y toque de yogur griego.', 'lunch', 600, 32, 70, 16, 1, NULL, 35, TRUE),
  ('71f0a8b1-6a05-4a1f-9000-000000000105', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Arroz integral con salmón ahumado', 'Arroz aromático con salmón ahumado, espinaca y vinagreta suave.', 'lunch', 630, 36, 62, 22, 1, NULL, 28, TRUE),
  ('71f0a8b1-6a06-4a1f-9000-000000000106', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Pasta integral con hummus y verduras', 'Pasta tibia mezclada con hummus, kale y tomate cherry.', 'lunch', 650, 24, 85, 18, 1, NULL, 30, TRUE),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Buddha bowl antiinflamatorio', 'Quinoa, remolacha, garbanzos y arándanos con aceite de oliva.', 'lunch', 590, 28, 72, 17, 1, NULL, 25, TRUE),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Tacos vegetales crujientes', 'Tortillas integrales con lentejas especiadas y kale.', 'lunch', 560, 22, 68, 16, 1, NULL, 22, TRUE),
  ('71f0a8b1-6a09-4a1f-9000-000000000109', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Ensalada templada de batata y feta', 'Batata al horno con kale, pepino y queso feta desmenuzado.', 'lunch', 575, 21, 66, 18, 1, NULL, 18, TRUE),
  ('71f0a8b1-6a0a-4a1f-9000-00000000010a', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Tofu teriyaki con brócoli', 'Tofu glaseado con brócoli al vapor y arroz integral.', 'lunch', 605, 34, 63, 19, 1, NULL, 26, TRUE),
  ('71f0a8b1-7b01-4a1f-9000-000000000201', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Salmón cítrico con quinoa verde', 'Filete de salmón al horno con quinoa y kale salteado.', 'dinner', 580, 42, 48, 20, 1, NULL, 30, TRUE),
  ('71f0a8b1-7b02-4a1f-9000-000000000202', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Pollo asado con calabaza especiada', 'Pollo al horno con calabaza rostizada y espinaca.', 'dinner', 560, 45, 40, 22, 1, NULL, 35, TRUE),
  ('71f0a8b1-7b03-4a1f-9000-000000000203', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Estofado de garbanzos especiados', 'Cazuela ligera de garbanzos, lentejas y verduras asadas.', 'dinner', 540, 24, 62, 18, 1, NULL, 32, TRUE),
  ('71f0a8b1-7b04-4a1f-9000-000000000204', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Crema de lentejas rojas con yogur', 'Crema sedosa de lentejas con topping de yogur y kale.', 'dinner', 520, 28, 58, 14, 1, NULL, 25, TRUE),
  ('71f0a8b1-7b05-4a1f-9000-000000000205', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Tortilla integral con tofu marinado', 'Tortilla rellena con tofu a la plancha y vegetales tibios.', 'dinner', 550, 30, 52, 18, 1, NULL, 28, TRUE),
  ('71f0a8b1-7b06-4a1f-9000-000000000206', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Pasta pesto de kale y hummus', 'Pasta integral con emulsión de kale, hummus y garbanzos.', 'dinner', 600, 22, 70, 22, 1, NULL, 30, TRUE),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Hummus bowl nocturno', 'Hummus cremoso con quinoa tibia, pepino y tomate cherry.', 'dinner', 510, 20, 55, 17, 1, NULL, 20, TRUE),
  ('71f0a8b1-7b08-4a1f-9000-000000000208', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Wrap caliente de salmón y espinaca', 'Tortilla integral tostada con salmón, espinaca y hummus.', 'dinner', 590, 38, 50, 20, 1, NULL, 25, TRUE),
  ('71f0a8b1-7b09-4a1f-9000-000000000209', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Arroz integral con verduras asadas', 'Arroz, calabaza, brócoli y remolacha al horno con oliva.', 'dinner', 530, 18, 72, 14, 1, NULL, 35, TRUE),
  ('71f0a8b1-7b0a-4a1f-9000-00000000020a', '0dcb51f3-4c06-48aa-9c61-6af7d2fb1a06', 'Curry suave de calabaza y garbanzos', 'Guiso de calabaza y legumbres con toque de kale.', 'dinner', 560, 22, 68, 16, 1, NULL, 33, TRUE)
ON CONFLICT (id) DO UPDATE SET
  plan_base_id = EXCLUDED.plan_base_id,
  nombre = EXCLUDED.nombre,
  descripcion = EXCLUDED.descripcion,
  meal_type = EXCLUDED.meal_type,
  calorias_totales = EXCLUDED.calorias_totales,
  proteinas_totales = EXCLUDED.proteinas_totales,
  carbohidratos_totales = EXCLUDED.carbohidratos_totales,
  grasas_totales = EXCLUDED.grasas_totales,
  porciones = EXCLUDED.porciones,
  tiempo_preparacion_min = EXCLUDED.tiempo_preparacion_min,
  es_biblioteca = TRUE,
  updated_at = NOW();

-- Seed recipe ingredients (upserts)
INSERT INTO public.recetas_ingredientes (id, receta_id, ingrediente_id, cantidad_base, unidad, porcentaje_merma)
VALUES
  ('aaaa0000-0000-0000-0000-000000000001', '11111111-2222-3333-4444-555555555551', 'f6e7c8a1-1234-4a6f-98ab-000000000101', 180, 'g', 4),
  ('aaaa0000-0000-0000-0000-000000000002', '11111111-2222-3333-4444-555555555551', 'f6e7c8a1-1234-4a6f-98ab-000000000102', 140, 'g', 3),
  ('aaaa0000-0000-0000-0000-000000000003', '11111111-2222-3333-4444-555555555551', 'f6e7c8a1-1234-4a6f-98ab-000000000103', 160, 'g', 5),
  ('aaaa0000-0000-0000-0000-000000000004', '11111111-2222-3333-4444-555555555551', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 15, 'ml', 0),
  ('bbbb0000-0000-0000-0000-000000000001', '11111111-2222-3333-4444-555555555552', 'f6e7c8a1-1234-4a6f-98ab-000000000104', 160, 'g', 6),
  ('bbbb0000-0000-0000-0000-000000000002', '11111111-2222-3333-4444-555555555552', 'f6e7c8a1-1234-4a6f-98ab-000000000105', 200, 'g', 5),
  ('bbbb0000-0000-0000-0000-000000000003', '11111111-2222-3333-4444-555555555552', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 120, 'g', 3),
  ('bbbb0000-0000-0000-0000-000000000004', '11111111-2222-3333-4444-555555555552', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 12, 'ml', 0)
ON CONFLICT (id) DO UPDATE SET
  receta_id = EXCLUDED.receta_id,
  ingrediente_id = EXCLUDED.ingrediente_id,
  cantidad_base = EXCLUDED.cantidad_base,
  unidad = EXCLUDED.unidad,
  porcentaje_merma = EXCLUDED.porcentaje_merma,
  created_at = NOW();

INSERT INTO public.recetas_ingredientes (receta_id, ingrediente_id, cantidad_base, unidad, porcentaje_merma)
VALUES
  ('71f0a8b1-6a01-4a1f-9000-000000000101', 'f6e7c8a1-1234-4a6f-98ab-00000000010D', 150, 'g', 0),
  ('71f0a8b1-6a01-4a1f-9000-000000000101', 'f6e7c8a1-1234-4a6f-98ab-000000000102', 130, 'g', 0),
  ('71f0a8b1-6a01-4a1f-9000-000000000101', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 70, 'g', 0),
  ('71f0a8b1-6a01-4a1f-9000-000000000101', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 60, 'g', 0),
  ('71f0a8b1-6a01-4a1f-9000-000000000101', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 12, 'ml', 0),
  ('71f0a8b1-6a02-4a1f-9000-000000000102', 'f6e7c8a1-1234-4a6f-98ab-000000000101', 160, 'g', 0),
  ('71f0a8b1-6a02-4a1f-9000-000000000102', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 80, 'g', 0),
  ('71f0a8b1-6a02-4a1f-9000-000000000102', 'f6e7c8a1-1234-4a6f-98ab-000000000107', 130, 'g', 0),
  ('71f0a8b1-6a02-4a1f-9000-000000000102', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 60, 'g', 0),
  ('71f0a8b1-6a02-4a1f-9000-000000000102', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 10, 'ml', 0),
  ('71f0a8b1-6a03-4a1f-9000-000000000103', 'f6e7c8a1-1234-4a6f-98ab-000000000112', 90, 'g', 0),
  ('71f0a8b1-6a03-4a1f-9000-000000000103', 'f6e7c8a1-1234-4a6f-98ab-000000000111', 50, 'g', 0),
  ('71f0a8b1-6a03-4a1f-9000-000000000103', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 60, 'g', 0),
  ('71f0a8b1-6a03-4a1f-9000-000000000103', 'f6e7c8a1-1234-4a6f-98ab-000000000110', 55, 'g', 0),
  ('71f0a8b1-6a03-4a1f-9000-000000000103', 'f6e7c8a1-1234-4a6f-98ab-000000000113', 30, 'g', 0),
  ('71f0a8b1-6a04-4a1f-9000-000000000104', 'f6e7c8a1-1234-4a6f-98ab-000000000108', 180, 'g', 0),
  ('71f0a8b1-6a04-4a1f-9000-000000000104', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 60, 'g', 0),
  ('71f0a8b1-6a04-4a1f-9000-000000000104', 'f6e7c8a1-1234-4a6f-98ab-00000000010A', 40, 'g', 0),
  ('71f0a8b1-6a04-4a1f-9000-000000000104', 'f6e7c8a1-1234-4a6f-98ab-000000000105', 90, 'g', 0),
  ('71f0a8b1-6a04-4a1f-9000-000000000104', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 8, 'ml', 0),
  ('71f0a8b1-6a05-4a1f-9000-000000000105', 'f6e7c8a1-1234-4a6f-98ab-000000000104', 130, 'g', 0),
  ('71f0a8b1-6a05-4a1f-9000-000000000105', 'f6e7c8a1-1234-4a6f-98ab-000000000107', 140, 'g', 0),
  ('71f0a8b1-6a05-4a1f-9000-000000000105', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 50, 'g', 0),
  ('71f0a8b1-6a05-4a1f-9000-000000000105', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 10, 'ml', 0),
  ('71f0a8b1-6a06-4a1f-9000-000000000106', 'f6e7c8a1-1234-4a6f-98ab-00000000010E', 150, 'g', 0),
  ('71f0a8b1-6a06-4a1f-9000-000000000106', 'f6e7c8a1-1234-4a6f-98ab-000000000111', 60, 'g', 0),
  ('71f0a8b1-6a06-4a1f-9000-000000000106', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 70, 'g', 0),
  ('71f0a8b1-6a06-4a1f-9000-000000000106', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 70, 'g', 0),
  ('71f0a8b1-6a06-4a1f-9000-000000000106', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 8, 'ml', 0),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', 'f6e7c8a1-1234-4a6f-98ab-000000000102', 120, 'g', 0),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', 'f6e7c8a1-1234-4a6f-98ab-000000000115', 80, 'g', 0),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 70, 'g', 0),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 60, 'g', 0),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', 'f6e7c8a1-1234-4a6f-98ab-000000000114', 40, 'g', 0),
  ('71f0a8b1-6a07-4a1f-9000-000000000107', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 8, 'ml', 0),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', 'f6e7c8a1-1234-4a6f-98ab-000000000112', 100, 'g', 0),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', 'f6e7c8a1-1234-4a6f-98ab-000000000108', 90, 'g', 0),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 55, 'g', 0),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 60, 'g', 0),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', 'f6e7c8a1-1234-4a6f-98ab-000000000111', 40, 'g', 0),
  ('71f0a8b1-6a08-4a1f-9000-000000000108', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 6, 'ml', 0),
  ('71f0a8b1-6a09-4a1f-9000-000000000109', 'f6e7c8a1-1234-4a6f-98ab-000000000105', 150, 'g', 0),
  ('71f0a8b1-6a09-4a1f-9000-000000000109', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 65, 'g', 0),
  ('71f0a8b1-6a09-4a1f-9000-000000000109', 'f6e7c8a1-1234-4a6f-98ab-000000000113', 40, 'g', 0),
  ('71f0a8b1-6a09-4a1f-9000-000000000109', 'f6e7c8a1-1234-4a6f-98ab-000000000110', 60, 'g', 0),
  ('71f0a8b1-6a09-4a1f-9000-000000000109', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 10, 'ml', 0),
  ('71f0a8b1-6a0a-4a1f-9000-00000000010a', 'f6e7c8a1-1234-4a6f-98ab-00000000010D', 160, 'g', 0),
  ('71f0a8b1-6a0a-4a1f-9000-00000000010a', 'f6e7c8a1-1234-4a6f-98ab-000000000117', 90, 'g', 0),
  ('71f0a8b1-6a0a-4a1f-9000-00000000010a', 'f6e7c8a1-1234-4a6f-98ab-000000000107', 120, 'g', 0),
  ('71f0a8b1-6a0a-4a1f-9000-00000000010a', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 12, 'ml', 0),
  ('71f0a8b1-6a0a-4a1f-9000-00000000010a', 'f6e7c8a1-1234-4a6f-98ab-000000000114', 30, 'g', 0),
  ('71f0a8b1-7b01-4a1f-9000-000000000201', 'f6e7c8a1-1234-4a6f-98ab-000000000104', 150, 'g', 0),
  ('71f0a8b1-7b01-4a1f-9000-000000000201', 'f6e7c8a1-1234-4a6f-98ab-000000000102', 110, 'g', 0),
  ('71f0a8b1-7b01-4a1f-9000-000000000201', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 60, 'g', 0),
  ('71f0a8b1-7b01-4a1f-9000-000000000201', 'f6e7c8a1-1234-4a6f-98ab-000000000110', 50, 'g', 0),
  ('71f0a8b1-7b01-4a1f-9000-000000000201', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 10, 'ml', 0),
  ('71f0a8b1-7b02-4a1f-9000-000000000202', 'f6e7c8a1-1234-4a6f-98ab-000000000101', 150, 'g', 0),
  ('71f0a8b1-7b02-4a1f-9000-000000000202', 'f6e7c8a1-1234-4a6f-98ab-000000000116', 140, 'g', 0),
  ('71f0a8b1-7b02-4a1f-9000-000000000202', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 50, 'g', 0),
  ('71f0a8b1-7b02-4a1f-9000-000000000202', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 12, 'ml', 0),
  ('71f0a8b1-7b03-4a1f-9000-000000000203', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 160, 'g', 0),
  ('71f0a8b1-7b03-4a1f-9000-000000000203', 'f6e7c8a1-1234-4a6f-98ab-000000000108', 80, 'g', 0),
  ('71f0a8b1-7b03-4a1f-9000-000000000203', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 60, 'g', 0),
  ('71f0a8b1-7b03-4a1f-9000-000000000203', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 70, 'g', 0),
  ('71f0a8b1-7b03-4a1f-9000-000000000203', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 8, 'ml', 0),
  ('71f0a8b1-7b04-4a1f-9000-000000000204', 'f6e7c8a1-1234-4a6f-98ab-000000000108', 180, 'g', 0),
  ('71f0a8b1-7b04-4a1f-9000-000000000204', 'f6e7c8a1-1234-4a6f-98ab-00000000010A', 45, 'g', 0),
  ('71f0a8b1-7b04-4a1f-9000-000000000204', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 50, 'g', 0),
  ('71f0a8b1-7b04-4a1f-9000-000000000204', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 6, 'ml', 0),
  ('71f0a8b1-7b05-4a1f-9000-000000000205', 'f6e7c8a1-1234-4a6f-98ab-000000000112', 100, 'g', 0),
  ('71f0a8b1-7b05-4a1f-9000-000000000205', 'f6e7c8a1-1234-4a6f-98ab-00000000010D', 140, 'g', 0),
  ('71f0a8b1-7b05-4a1f-9000-000000000205', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 60, 'g', 0),
  ('71f0a8b1-7b05-4a1f-9000-000000000205', 'f6e7c8a1-1234-4a6f-98ab-000000000111', 45, 'g', 0),
  ('71f0a8b1-7b05-4a1f-9000-000000000205', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 50, 'g', 0),
  ('71f0a8b1-7b06-4a1f-9000-000000000206', 'f6e7c8a1-1234-4a6f-98ab-00000000010E', 150, 'g', 0),
  ('71f0a8b1-7b06-4a1f-9000-000000000206', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 70, 'g', 0),
  ('71f0a8b1-7b06-4a1f-9000-000000000206', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 60, 'g', 0),
  ('71f0a8b1-7b06-4a1f-9000-000000000206', 'f6e7c8a1-1234-4a6f-98ab-000000000113', 35, 'g', 0),
  ('71f0a8b1-7b06-4a1f-9000-000000000206', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 12, 'ml', 0),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', 'f6e7c8a1-1234-4a6f-98ab-000000000111', 70, 'g', 0),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 90, 'g', 0),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', 'f6e7c8a1-1234-4a6f-98ab-000000000102', 110, 'g', 0),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', 'f6e7c8a1-1234-4a6f-98ab-000000000110', 60, 'g', 0),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 60, 'g', 0),
  ('71f0a8b1-7b07-4a1f-9000-000000000207', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 8, 'ml', 0),
  ('71f0a8b1-7b08-4a1f-9000-000000000208', 'f6e7c8a1-1234-4a6f-98ab-000000000112', 110, 'g', 0),
  ('71f0a8b1-7b08-4a1f-9000-000000000208', 'f6e7c8a1-1234-4a6f-98ab-000000000104', 120, 'g', 0),
  ('71f0a8b1-7b08-4a1f-9000-000000000208', 'f6e7c8a1-1234-4a6f-98ab-000000000109', 70, 'g', 0),
  ('71f0a8b1-7b08-4a1f-9000-000000000208', 'f6e7c8a1-1234-4a6f-98ab-000000000111', 45, 'g', 0),
  ('71f0a8b1-7b08-4a1f-9000-000000000208', 'f6e7c8a1-1234-4a6f-98ab-00000000010F', 50, 'g', 0),
  ('71f0a8b1-7b09-4a1f-9000-000000000209', 'f6e7c8a1-1234-4a6f-98ab-000000000107', 150, 'g', 0),
  ('71f0a8b1-7b09-4a1f-9000-000000000209', 'f6e7c8a1-1234-4a6f-98ab-000000000116', 110, 'g', 0),
  ('71f0a8b1-7b09-4a1f-9000-000000000209', 'f6e7c8a1-1234-4a6f-98ab-000000000117', 70, 'g', 0),
  ('71f0a8b1-7b09-4a1f-9000-000000000209', 'f6e7c8a1-1234-4a6f-98ab-000000000115', 70, 'g', 0),
  ('71f0a8b1-7b09-4a1f-9000-000000000209', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 10, 'ml', 0),
  ('71f0a8b1-7b0a-4a1f-9000-00000000020a', 'f6e7c8a1-1234-4a6f-98ab-000000000116', 160, 'g', 0),
  ('71f0a8b1-7b0a-4a1f-9000-00000000020a', 'f6e7c8a1-1234-4a6f-98ab-00000000010B', 100, 'g', 0),
  ('71f0a8b1-7b0a-4a1f-9000-00000000020a', 'f6e7c8a1-1234-4a6f-98ab-000000000108', 80, 'g', 0),
  ('71f0a8b1-7b0a-4a1f-9000-00000000020a', 'f6e7c8a1-1234-4a6f-98ab-00000000010C', 60, 'g', 0),
  ('71f0a8b1-7b0a-4a1f-9000-00000000020a', 'f6e7c8a1-1234-4a6f-98ab-000000000106', 12, 'ml', 0);

